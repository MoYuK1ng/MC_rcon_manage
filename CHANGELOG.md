# æ›´æ–°æ—¥å¿— / Changelog

## v2.4.0 (2024-11-29)

### ðŸ” åŠ å¯†ç³»ç»Ÿé‡æž„ / Encryption System Refactor
- **å¯†é’¥éªŒè¯å™¨**ï¼šæ–°å¢ž KeyValidator ç»„ä»¶ï¼Œæä¾›è¯¦ç»†çš„å¯†é’¥æ ¼å¼éªŒè¯
- **è‡ªå®šä¹‰å¼‚å¸¸**ï¼šå®Œæ•´çš„å¼‚å¸¸å±‚æ¬¡ç»“æž„ï¼Œæ¸…æ™°çš„é”™è¯¯æ¶ˆæ¯å’Œè§£å†³æ–¹æ¡ˆ
- **å¢žå¼ºçš„åŠ å¯†å·¥å…·**ï¼šæ”¹è¿›çš„ EncryptionUtilityï¼Œæ”¯æŒå¯†é’¥éªŒè¯å’Œè½®æ¢
- **å¯åŠ¨éªŒè¯**ï¼šåº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨éªŒè¯åŠ å¯†å¯†é’¥æ ¼å¼

### ðŸ› ï¸ æ–°å¢žç®¡ç†å·¥å…· / New Management Tools
- **generate_key.pyï¼ˆå¢žå¼ºï¼‰**ï¼šæ”¯æŒå¯†é’¥éªŒè¯ã€è‡ªåŠ¨å¤‡ä»½å’Œå›žæ»š
- **verify_key.pyï¼ˆæ–°ï¼‰**ï¼šéªŒè¯åŠ å¯†å¯†é’¥å’Œæµ‹è¯•å¯†ç è§£å¯†
- **rotate_key.pyï¼ˆæ–°ï¼‰**ï¼šå®‰å…¨çš„å¯†é’¥è½®æ¢ï¼Œè‡ªåŠ¨é‡æ–°åŠ å¯†æ‰€æœ‰å¯†ç 
- **æ–‡ä»¶æƒé™æ£€æŸ¥**ï¼šè‡ªåŠ¨æ£€æŸ¥ .env æ–‡ä»¶æƒé™å®‰å…¨æ€§

### ðŸ“š æ–‡æ¡£å®Œå–„ / Documentation
- **ENCRYPTION.md**ï¼šå®Œæ•´çš„åŠ å¯†å¯†é’¥ç®¡ç†æ–‡æ¡£
- **README.md æ›´æ–°**ï¼šæ·»åŠ å¯†é’¥ç®¡ç†éƒ¨åˆ†ï¼ˆä¸­è‹±æ–‡ï¼‰
- **.env.example æ›´æ–°**ï¼šæ›´è¯¦ç»†çš„æ³¨é‡Šå’Œå®‰å…¨æç¤º

### âœ… æµ‹è¯•è¦†ç›– / Test Coverage
- **60 ä¸ªæ–°æµ‹è¯•**ï¼šåŒ…æ‹¬ 16 ä¸ªåŸºäºŽå±žæ€§çš„æµ‹è¯•
- **137 ä¸ªæµ‹è¯•é€šè¿‡**ï¼š100% é€šè¿‡çŽ‡
- **å…¨é¢è¦†ç›–**ï¼šå¯†é’¥éªŒè¯ã€åŠ å¯†ã€è§£å¯†ã€è½®æ¢ã€æ–‡ä»¶å®‰å…¨

### ðŸ”§ æ”¹è¿› / Improvements
- æ¸…æ™°çš„é”™è¯¯æ¶ˆæ¯ï¼Œæ˜Žç¡®åŒºåˆ†å¯†é’¥é—®é¢˜å’Œå¯†ç é—®é¢˜
- å¯†é’¥è½®æ¢æ”¯æŒè‡ªåŠ¨å¤‡ä»½å’Œå›žæ»š
- æ–‡ä»¶æƒé™å®‰å…¨æ£€æŸ¥ï¼ˆUnix/Linuxï¼‰
- å®Œæ•´çš„å¯†é’¥ç”Ÿå‘½å‘¨æœŸç®¡ç†

### ðŸ—‘ï¸ æ¸…ç† / Cleanup
- åˆ é™¤å¼€å‘æµ‹è¯•æ–‡ä»¶ï¼ˆtest_*.pyï¼‰
- åˆ é™¤å¤šä½™çš„ç¼–è¯‘è„šæœ¬
- ä¼˜åŒ–é¡¹ç›®ç»“æž„

---

## v2.3.0 (2024-11-28)

### ðŸŽ¨ UI é‡æ–°è®¾è®¡ / UI Redesign
- **å…¨æ–°çŽ°ä»£åŒ–ç•Œé¢**ï¼šä»Ž Bootstrap 5 è¿ç§»åˆ° Tailwind CSS
- **è®¾è®¡çµæ„Ÿ**ï¼šå— Vercelã€Linear å’Œ Stripe ä»ªè¡¨æ¿å¯å‘
- **å›¾æ ‡ç³»ç»Ÿ**ï¼šä½¿ç”¨ Lucide Icons æ›¿ä»£ Bootstrap Icons
- **åŠ¨ç”»æ•ˆæžœ**ï¼šæ·»åŠ æ·¡å…¥ã€ä¸Šæ»‘å’Œè„‰å†²åŠ¨ç”»
- **å“åº”å¼ä¼˜åŒ–**ï¼šå®Œç¾Žé€‚é…ç§»åŠ¨ç«¯ã€å¹³æ¿å’Œæ¡Œé¢è®¾å¤‡

### âœ¨ æ–°åŠŸèƒ½ / New Features
- **ç‰ˆæœ¬æ˜¾ç¤º**ï¼šåœ¨ä»ªè¡¨æ¿å¤´éƒ¨æ˜¾ç¤ºå½“å‰åº”ç”¨ç‰ˆæœ¬
- **æƒé™ç»„ç®¡ç†**ï¼šéšè— Django é»˜è®¤æƒé™ç»„ï¼Œåªæ˜¾ç¤ºè‡ªå®šä¹‰ç»„
- **ç»„ç»Ÿè®¡ä¿¡æ¯**ï¼šæ˜¾ç¤ºæ¯ä¸ªç»„å…³è”çš„ç”¨æˆ·æ•°å’ŒæœåŠ¡å™¨æ•°
- **ä¼˜é›…çš„ç™»å½•é¡µé¢**ï¼šå…¨æ–°è®¾è®¡çš„ç™»å½•ç•Œé¢

### ðŸ”§ æ”¹è¿› / Improvements
- **å¯¼èˆªæ **ï¼šå›ºå®šé¡¶éƒ¨å¯¼èˆªï¼Œæ¯›çŽ»ç’ƒæ•ˆæžœ
- **æœåŠ¡å™¨å¡ç‰‡**ï¼šæ¸å˜è‰²è®¾è®¡ï¼Œå®žæ—¶çŠ¶æ€æŒ‡ç¤ºå™¨
- **çŽ©å®¶åˆ—è¡¨**ï¼šä¼˜åŒ–çš„å±•ç¤ºæ•ˆæžœå’ŒåŠ è½½åŠ¨ç”»
- **æ¶ˆæ¯æç¤º**ï¼šæ›´ç¾Žè§‚çš„æˆåŠŸ/é”™è¯¯æç¤ºæ ·å¼

### ðŸ“ æŠ€æœ¯æ”¹è¿› / Technical Improvements
- æ·»åŠ ä¸Šä¸‹æ–‡å¤„ç†å™¨æ”¯æŒç‰ˆæœ¬æ˜¾ç¤º
- è‡ªå®šä¹‰ Group Admin è¿‡æ»¤é»˜è®¤ç»„
- å®Œæ•´çš„å±žæ€§æµ‹è¯•è¦†ç›–ï¼ˆ7ä¸ªæ–°æµ‹è¯•ï¼‰
- ä¼˜åŒ–çš„ CSS åŠ¨ç”»æ€§èƒ½

---

## v2.2.0 (2024-11-28)

### ðŸ”§ ä¿®å¤ / Fixes
- **ä¿®å¤ .env æ–‡ä»¶ç”Ÿæˆé€»è¾‘**ï¼šè§£å†³ä½¿ç”¨ `sed` å’Œ `echo >>` å¯¼è‡´çš„é‡å¤è¡Œå’Œæ ¼å¼é”™è¯¯é—®é¢˜
- **å®Œå–„ CSRF é…ç½®**ï¼šç¡®ä¿ `CSRF_TRUSTED_ORIGINS` åŒ…å«æ‰€æœ‰å¿…è¦çš„åœ°å€
  - ç›´æŽ¥è®¿é—®æ¨¡å¼ï¼š`http://localhost:PORT` + `http://127.0.0.1:PORT`
  - åå‘ä»£ç†æ¨¡å¼ï¼š`https://DOMAIN` + `http://localhost:PORT` + `http://127.0.0.1:PORT`
- **æ”¹è¿›æ–‡ä»¶æ ¼å¼**ï¼šä½¿ç”¨ `cat > .env` ç›´æŽ¥ç”Ÿæˆå®Œæ•´æ–‡ä»¶ï¼Œç¡®ä¿æ­£ç¡®çš„æ¢è¡Œç¬¦

### âœ¨ æ”¹è¿› / Improvements
- **ç‰ˆæœ¬æ˜¾ç¤º**ï¼šåœ¨ä¸»èœå•æ˜¾ç¤ºå½“å‰è„šæœ¬ç‰ˆæœ¬å’Œæ—¥æœŸ
- **é…ç½®ä¿æŠ¤**ï¼šæ›´æ–°åº”ç”¨æ—¶ä¸ä¼šä¿®æ”¹ç”¨æˆ·çš„ `.env` é…ç½®
- **é”™è¯¯é¢„é˜²**ï¼šé¿å…ç”Ÿäº§çŽ¯å¢ƒä¸­å‡ºçŽ° CSRF 403 é”™è¯¯

### ðŸ“ æŠ€æœ¯ç»†èŠ‚ / Technical Details
```bash
# æ—§æ–¹å¼ï¼ˆæœ‰é—®é¢˜ï¼‰
sed -i "s/^DEBUG=.*/DEBUG=False/" .env
echo "ALLOWED_HOSTS=..." >> .env

# æ–°æ–¹å¼ï¼ˆæ­£ç¡®ï¼‰
cat > .env << EOF
# Django Settings
SECRET_KEY=${SECRET_KEY}
DEBUG=False
...
EOF
```

---

## v2.1.0 (2024-11-27)

### âœ¨ æ–°åŠŸèƒ½ / New Features
- **è„šæœ¬è‡ªæ›´æ–°åŠŸèƒ½**ï¼šæ–°å¢žé€‰é¡¹ 11ï¼Œæ”¯æŒè‡ªåŠ¨æ£€æŸ¥å’Œæ›´æ–°ç®¡ç†è„šæœ¬
- **ç‰ˆæœ¬ç®¡ç†**ï¼šæ·»åŠ  VERSION æ–‡ä»¶è·Ÿè¸ªè„šæœ¬ç‰ˆæœ¬
- **åŒè¯­æ”¯æŒ**ï¼šå®Œæ•´çš„ä¸­è‹±æ–‡ç•Œé¢

### ðŸ—‘ï¸ æ¸…ç† / Cleanup
- åˆ é™¤å¤šä½™çš„æ–‡æ¡£å’Œè„šæœ¬æ–‡ä»¶
- ç»Ÿä¸€æ‰€æœ‰åŠŸèƒ½åˆ° `manage.sh` ä¸€ä¸ªè„šæœ¬ä¸­

---

## v2.0.0 (2024-11-26)

### âœ¨ æ–°åŠŸèƒ½ / New Features
- **ç»Ÿä¸€ç®¡ç†è„šæœ¬**ï¼šæ•´åˆæ‰€æœ‰ç®¡ç†åŠŸèƒ½
- **è®¿é—®æ–¹å¼é€‰æ‹©**ï¼šæ”¯æŒç›´æŽ¥è®¿é—®å’Œåå‘ä»£ç†ä¸¤ç§æ¨¡å¼
- **è‡ªåŠ¨ CSRF é…ç½®**ï¼šæ ¹æ®è®¿é—®æ–¹å¼è‡ªåŠ¨é…ç½® CSRF è®¾ç½®
- **å®Œæ•´çš„æœåŠ¡ç®¡ç†**ï¼šå¯åŠ¨ã€åœæ­¢ã€é‡å¯ã€æŸ¥çœ‹çŠ¶æ€å’Œæ—¥å¿—
- **æ•°æ®å¤‡ä»½æ¢å¤**ï¼šæ”¯æŒæ•°æ®åº“å’Œé…ç½®æ–‡ä»¶çš„å¤‡ä»½æ¢å¤
- **å®Œå…¨å¸è½½åŠŸèƒ½**ï¼šå¸¦å®‰å…¨ç¡®è®¤çš„å¸è½½é€‰é¡¹

### ðŸ”§ æ”¹è¿› / Improvements
- ç§»é™¤ Nginx ç®¡ç†ï¼Œé¿å…ä¸Žå®å¡”é¢æ¿å†²çª
- æ”¹è¿›é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º
- ä¼˜åŒ–å®‰è£…æµç¨‹

---

## å¦‚ä½•æ›´æ–° / How to Update

### æ–¹æ³• 1ï¼šä½¿ç”¨è„šæœ¬è‡ªæ›´æ–°ï¼ˆæŽ¨èï¼‰
```bash
cd /opt/mc_rcon
bash manage.sh
# é€‰æ‹©è¯­è¨€åŽï¼Œé€‰æ‹©é€‰é¡¹ 11 (æ›´æ–°ç®¡ç†è„šæœ¬)
```

### æ–¹æ³• 2ï¼šæ‰‹åŠ¨ä¸‹è½½
```bash
cd /opt/mc_rcon
wget https://raw.githubusercontent.com/MoYuK1ng/MC_rcon_manage/main/manage.sh -O manage.sh
chmod +x manage.sh
```

### æ–¹æ³• 3ï¼šGit æ‹‰å–
```bash
cd /opt/mc_rcon
git pull origin main
```

---

## ç‰ˆæœ¬æ£€æŸ¥ / Version Check

æŸ¥çœ‹å½“å‰è„šæœ¬ç‰ˆæœ¬ï¼š
```bash
grep "SCRIPT_VERSION=" manage.sh | head -1
```

æŸ¥çœ‹è¿œç¨‹æœ€æ–°ç‰ˆæœ¬ï¼š
```bash
curl -s https://raw.githubusercontent.com/MoYuK1ng/MC_rcon_manage/main/VERSION
```
